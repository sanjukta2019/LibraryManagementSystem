{% extends "layout.html" %}
{% block title %}
Signin Page
{% endblock %}
{% block content %}
<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container-fluid">
        <strong>
            <h7>Logged in as Librarian</h7>
        </strong></h1>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            
            <a class="nav-link active" aria-current="page" href="{{ url_for('index') }}">Home</a>

            <div class="heading"><a href="{{ url_for('logout') }}" class="navbar-item">Logout</a></div>   
           <a class="nav-link active" aria-current="page" href="{{ url_for('dashboard') }}">Dashboard</a>
           <a class="nav-link active" aria-current="page" href="{{ url_for('userfeedback') }}">Userfeedback</a>
          
            
                   
        </div>
    </div>
</nav>

<div class="container-fluid p-4" style="margin-left: 40px; margin-right: 40px;">
    <div class=" row justify-content-center">
        <div class="col-lg-12">
            <h2>Librarian's Dashboard</h2>   
            <form action = '/user_requeststatus'>
                <h3 class="text-muted">Request Status of all Users</h3>
                <table class = "table">
                    <thead>
                    <tr>   
                        <th>User Name</th>                 
                        <th>Book Name</th>
                        <th>Number of Days</th>
                        <th>Status</th>                      
                        <th>Return Date</th>                        
                        <th>Action</th>                                           
                    </tr>
                </thead>
                <tbody>
                {% for entry in user_request %}
                <tr>         
                    <td>{{ entry.user.username }}</td>
                    <td>{{ entry.book.name }}</td>
                    <td>{{entry.number_of_days}}</td>
                    <td>{{ entry.status }}</td>  
                    <td>{{ entry.return_date }}</td>                     
                    <td><a href="{{ url_for('approve_request', id=entry.id) }}" class="btn btn-success">Approve</a>               
                    <a href="{{ url_for('reject_request', id=entry.id) }}" class="btn btn-danger">Reject</a> 
                    <a href="{{ url_for('revoke_access', id=entry.id) }}" class="btn btn-dark">Revoke</a>

                </td>            
                </tr>
                {% endfor %}                 
            </tbody>   
            </table>          
            
{% endblock %} 